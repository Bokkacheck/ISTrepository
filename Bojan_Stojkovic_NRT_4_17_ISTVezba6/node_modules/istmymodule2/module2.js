const module1 = require("istmymodule1/module1");
const Knjiga = module1.Knjiga;
const Storage = module1.Storage;

exports.SetStorage = (name)=>{
    Storage.SetName(name);
}

exports.SveKnjige = ()=>{
    return Storage.GetKnjige();
}
exports.AddKnjiga = (id,naziv,name)=>{
    let lista = Storage.GetKnjige();
    lista.push(new Knjiga(id,naziv,name));
    Storage.UpdateFile(lista);
}
exports.GetKnjiga = (id)=>{
    return Storage.GetKnjige().filter(k=>k.id == id)[0];
}
exports.PostaviAutora = (naziv,autor)=>{
    let lista = Storage.GetKnjige();
    lista.forEach(k=>{
        if(k.naziv==naziv){
            k.autor = autor;
        }
    })
    Storage.UpdateFile(lista);
}
exports.DeleteKnjiga = (id)=>{
    let lista = Storage.GetKnjige();
    for(let i = 0;i<lista.length;i++){
        if(lista[i].id==id){
            lista.splice(i--,1);
        }
    }
    Storage.UpdateFile(lista);
}
exports.GetKnjigaByAutor = (autor)=>{
    return Storage.GetKnjige().filter(k=>k.autor==autor);
}